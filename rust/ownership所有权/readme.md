# 什么是所有权

> [官网原文](https://kaisery.github.io/trpl-zh-cn/ch04-01-what-is-ownership.html)

## 栈 stack 和 堆 heap

栈，是`后进先出`的结构。栈中的所有数据都必须占用已知和固定的大小。

在编译时，大小未知或可能变化的数据，要存储在堆上。

当向堆存储数据时，需要先请求一定大小的空间。这里内存分配器会在堆上找到一块一定大小的空间，并把它标记为已使用，同时返回表示该位置地址的指针pointer。这个过程叫做“在堆上分配内存”，简称“分配”。

有个形象的例子：去餐馆就坐吃饭，当进入时，你说明有几个人，餐馆员工会找到一个够大的空桌子并领你们过去。如果有人来迟了，他们也可以通过询问来找到你们坐在哪。

---

入栈比在堆上分配内存要快，原因：

1. 入栈不需要寻找空间并分配内存，其位置总是栈顶。

2. 堆除了分配内存之外，还要做一些记录工作为下次分配做准备。

---

栈上访问数据速度比堆上快。因为堆上必须通过指针来访问。
