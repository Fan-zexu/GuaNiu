# render阶段

主要理解`Fiber`构建和`Fiber`树生成

`render`阶段开始于 `performSyncWorkOnRoot` 和 `performConcurrentWorkOnRoot` 的调用，这取决于本次更新是同步还是异步更新。

```js
// performSyncWorkOnRoot会调用该方法
function workLoopSync() {
  while (workInProgress !== null) {
    performUnitOfWork(workInProgress);
  }
}

// performConcurrentWorkOnRoot会调用该方法
function workLoopConcurrent() {
  while (workInProgress !== null && !shouldYield()) {
    performUnitOfWork(workInProgress);
  }
}
```

`Fiber Reconciler`是从通过遍历来实现异步中断的递归，所以`performUnitOfWork`工作可以分为 **“递”**和 **“归”**

## “递”阶段

会从`rootFiber`节点往下做**深度优先遍历**。为每一个`Fiber节点`调用[`beginWork`](https://github.com/facebook/react/blob/970fa122d8188bafa600e9b5214833487fbf1092/packages/react-reconciler/src/ReactFiberBeginWork.new.js#L3058)方法，该方法会根据传入的`Fiber`节点，创建`子Fiber`节点，同时将这两个节点连接起来。

当遍历到叶子节点（没有子组件时），就会进入**归**阶段。

## “归”阶段